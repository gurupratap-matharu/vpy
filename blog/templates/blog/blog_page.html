{% extends "layouts/base.html" %}

{% load static i18n wagtailcore_tags wagtailimages_tags %}

{% block title %}
  {{ page.title }}
{% endblock title %}

{% block extra_css %}
  <style>
       #reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            z-index: 9999;
            background: linear-gradient(310deg, #7928ca, #ff0080);
            transition: width 0.2s ease;
       }


       #toc .nav-link {
            color: #6c757d;
            padding: 3px 0;
       }

       #toc .nav-link.active {
            color: #0d6efd;
            font-weight: 600;
       }
  </style>
{% endblock extra_css %}

{% block content %}
  <div id="reading-progress"></div>
  <section class="container">
    <div class="row">
      <div class="col col-lg-6 mx-auto">
        <h1 class="display-4 text-center">{{ page.title }}</h1>
        {% for author in page.authors %}
          <div class="author justify-content-center align-items-center py-3 py-md-5">
            {% image author.image width-200 class="avatar avatar-xl rounded-circle" %}
            <div class="name ps-2">
              <p class="h6 mb-0">Por: {{ author.first_name }} {{ author.last_name }}</p>
              <div class="stats">
                <small class="text-sm text-secondary">Actualizado: {{ page.date }}</small>
                <svg class="mx-1" width="8" height="8" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <circle cx="32" cy="32" r="30" fill="#054ada" />
                </svg>
                <small class="text-sm text-secondary">{{ page.reading_time }} min de lectura</small>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
  <section class="container py-5">
    <div class="row">
      <nav id="toc" class="col-lg-3 d-none d-lg-block">
        <div class="position-sticky" style="top: 100px;">
          <h6>Contenidos</h6>
          <nav id="toc-list" class="nav flex-column text-sm">
          </nav>
        </div>
      </nav>
      <div class="col col-lg-6 me-auto">
        <article id="blog-content"
                 data-bs-spy="scroll"
                 data-bs-target="#toc"
                 data-bs-root-margin="0px 0px -40%"
                 data-bs-smooth-scroll="true"
                 tabindex="0">
          {% if page.subtitle %}<p class="lead">{{ page.subtitle }}</p>{% endif %}
          {% if page.intro %}<p class="lead">{{ page.intro }}</p>{% endif %}
          {{ page.body }}
        </article>
      </div>
    </div>
  </section>
{% endblock content %}

{% block footer %}
  {% include "includes/footer-grand.html" %}
{% endblock footer %}

{% block extra_js %}
  {# djlint:off #}<script type="application/ld+json">{{ page.ld_entity }}</script>{# djlint:on #}
  <script src="{% static 'assets/js/blog_page.js' %}"></script>
{% endblock extra_js %}
